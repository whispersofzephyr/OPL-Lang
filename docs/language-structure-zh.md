[← 返回首页](index.md)

# 🧠 核心理念与 C‑O‑S 结构模型

---

## 1. 基本哲学

**OPL‑Lang** 建立在对期权本质的重新诠释之上：

> 一个期权并不是一个静态的盈亏图形，  
> 而是由多个希腊字母敏感性模块组成的动态响应系统。

每一个期权都会对市场输入作出反应 —— 如**价格、波动率、时间、利率** ——  
通过一阶偏导数形式的响应通道，即常见的希腊字母：Δ（Delta）、Γ（Gamma）、V（Vega）、Θ（Theta）、ρ（Rho）等。

这些并非附加信息，而是**定义期权行为本质的结构**。

在此模型中：

- **行权价（strike）**与**到期时间（tenor）**不再是静态参数，而是**控制接口**；
- 每一次对行权价或期限的调整，都会改变该期权内部敏感性结构的激活分布；
- 多腿策略则是一组**响应模块的结构组合**，经过协调以适配特定的市场意图。

这个认知框架，构成了 OPL‑Lang 所有语言层次的语义基础。

---

## 2. C‑O‑S 结构模型

OPL‑Lang 中的所有策略表达，都建立在三个结构层之上：

| 层级 | 符号 | 说明 |
|------|------|------|
| 🧩 **原始组件（Primitive Component）** | `C` | 最小单位：具备已知响应行为的金融工具，通常是一条期权、股票或现金腿。 |
| 🔧 **操作单元（Operational Unit）** | `O` | 对某一 `C` 组件的交易指令，包括方向（买入或卖出）、数量、行权价与期限。 |
| 🏗 **策略结构（Strategy Structure）** | `S` | 多个 `O` 组成的策略结构，结合意图输入、约束条件、可选的调参行为，形成完整的交易逻辑。 |

结构化表达如下：

```
S = { O₁, O₂, ..., Oₙ }

每个 Oᵢ = [ sign, qty, C ]  
其中 sign ∈ {+1, –1}，表示多头（买入）或空头（卖出）

每个 C = instrument + sensitivity model（即该工具的希腊值模型）
```

该模型使 OPL‑Lang 能够表达：

- ✅ 简单的单腿交易（如 `S = {O}`）；
- ✅ 复杂的多腿组合结构；
- ✅ 包含动态调节、结构回退、退出机制等高级策略逻辑。

---

### 🔍 术语说明

| 项 | 含义 |
|----|------|
| `sign` | 交易方向：`+1` 表示买入（多头），`–1` 表示卖出（空头） |
| `qty` | 数量，表示合约张数或交易单位 |
| `C` | 原始组件，具体的金融工具与其响应模型 |
| `O` | 操作指令，对某个 `C` 执行的交易动作 |
| `S` | 策略结构，多个 `O` 组合并加入约束与意图后的整体策略表达 |

---

## 3. 为什么这个结构如此重要？

传统的策略工具往往将期权视为静态的价格单元或盈亏图模板。  
而 OPL‑Lang 的核心理念是：**策略应被建模为动态响应系统**，它们必须对市场输入做出可控的、结构性反应，并满足特定的逻辑约束与风险要求。

- **人类交易者**可以通过结构化的 **路径 A（Path A）**，按照市场预期一步步构建模板型策略，如价差、蝶式、铁鹰等。
- **机器系统**可以使用**更高级的路径 A**（含自定义结构），并借助 **路径 B 和 C** 实现策略结构的自动生成与目标导向反解，例如控制 Δ/Θ 比例、目标时间风险、资本效率等。

无论人或机器，OPL‑Lang 都建立在一个信念之上：

> **期权是一种行为组件（behavioral component）**，  
> 只有建模其动态响应特性，策略逻辑才能被准确表达、验证并持续优化。

---
## 4. 策略生成路径与应用层

虽然 OPL‑Lang 专注于结构表达，但它的真实威力在于可以与各类系统配合使用，  
实现根据用户输入或市场条件 **生成、调整、退出** 策略的全流程。

为支持不同的使用场景，OPL‑Lang 设计上兼容以下三种策略生成路径：

- 🧩 **路径 A** — 基于逻辑树的策略构建器，由人类输入驱动（如图形界面 App）
- 🔧 **路径 B** — 机器编译器，根据意图与约束自动组合策略结构
- 🔍 **路径 C** — 反向推理器，从目标希腊值或收益特征出发推导可行结构

这三条路径反映了从手动到自动的逐级能力提升，  
并可与生命周期逻辑结合，构建具备约束感知与自主调控能力的完整策略代理系统。

关于具体的部署层与应用实现，详见：  
📘 [部署路径文档 →](application-paths-zh.md)

---

## 5. 生命周期控制：策略调整与退出

虽然 OPL‑Lang 的核心结构聚焦于策略的初始构建（如 `S = { O₁, O₂, ... }`），  
但该语言也内建了对策略生命周期的表达机制，使策略具备 **响应性与闭环性**。

语言中提供两个关键模块：

- 🔄 **调整模块（Adjustment Module）** —— 当原始观点有所削弱但未完全失效时，策略可以进行动态调整。包括：
  - `adjust_when`：触发调整尝试的布尔条件
  - `adjust_playbook`：有序调整动作列表（如 roll, hedge, rebalance）
  - `abort_if`：守护条件，若满足则取消调整并进入退出流程

- ⏹ **退出模块（Exit Module）** —— 定义策略的退出条件及执行方式。包括：
  - `exit_mode`：退出条件的评估模式（`first_hit`, `all_required`, 或 `machine_decide`）
  - `exit_triggers`：触发退出的条件列表（如价格目标、盈亏比、剩余时间等）

这两个模块使 OPL‑Lang 不再只是一个静态结构语言，  
而是具备完整生命周期表达能力的 **策略级 DSL**，  
能够以声明式逻辑对策略的构建、演化与结束进行建模。

这使得 OPL‑Lang 不仅适用于人类引导，也适用于机器自主管理策略，具备清晰的生命周期逻辑。

OPL‑Lang 的设计初衷不仅是描述一个策略“是什么”，  
更在于清晰表达它是如何被**构建、调整、退出**的 —— **从开仓到结束的整个生命周期**。

---

[← 返回首页](index.md)
